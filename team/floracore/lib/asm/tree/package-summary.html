<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_372) on Sun May 28 16:03:09 CST 2023 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>team.floracore.lib.asm.tree</title>
<meta name="date" content="2023-05-28">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="team.floracore.lib.asm.tree";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li class="navBarCell1Rev">程序包</li>
<li>类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../team/floracore/lib/asm/signature/package-summary.html">上一个程序包</a></li>
<li><a href="../../../../../team/floracore/lib/asm/tree/analysis/package-summary.html">下一个程序包</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?team/floracore/lib/asm/tree/package-summary.html" target="_top">框架</a></li>
<li><a href="package-summary.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="程序包" class="title">程序包&nbsp;team.floracore.lib.asm.tree</h1>
<div class="docSummary">
<div class="block">
    Provides an ASM visitor that constructs a tree representation of the
    classes it visits.</div>
</div>
<p>请参阅:&nbsp;<a href="#package.description">说明</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="类概要表, 列表类和解释">
<caption><span>类概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">类</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/AbstractInsnNode.html" title="team.floracore.lib.asm.tree中的类">AbstractInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a bytecode instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/AnnotationNode.html" title="team.floracore.lib.asm.tree中的类">AnnotationNode</a></td>
<td class="colLast">
<div class="block">A node that represents an annotation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ClassNode.html" title="team.floracore.lib.asm.tree中的类">ClassNode</a></td>
<td class="colLast">
<div class="block">A node that represents a class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/FieldInsnNode.html" title="team.floracore.lib.asm.tree中的类">FieldInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a field instruction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/FieldNode.html" title="team.floracore.lib.asm.tree中的类">FieldNode</a></td>
<td class="colLast">
<div class="block">A node that represents a field.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/FrameNode.html" title="team.floracore.lib.asm.tree中的类">FrameNode</a></td>
<td class="colLast">
<div class="block">A node that represents a stack map frame.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/IincInsnNode.html" title="team.floracore.lib.asm.tree中的类">IincInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents an IINC instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/InnerClassNode.html" title="team.floracore.lib.asm.tree中的类">InnerClassNode</a></td>
<td class="colLast">
<div class="block">A node that represents an inner class.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/InsnList.html" title="team.floracore.lib.asm.tree中的类">InsnList</a></td>
<td class="colLast">
<div class="block">A doubly linked list of <a href="../../../../../team/floracore/lib/asm/tree/AbstractInsnNode.html" title="team.floracore.lib.asm.tree中的类"><code>AbstractInsnNode</code></a> objects.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/InsnNode.html" title="team.floracore.lib.asm.tree中的类">InsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a zero operand instruction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/IntInsnNode.html" title="team.floracore.lib.asm.tree中的类">IntInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents an instruction with a single int operand.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/InvokeDynamicInsnNode.html" title="team.floracore.lib.asm.tree中的类">InvokeDynamicInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents an invokedynamic instruction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/JumpInsnNode.html" title="team.floracore.lib.asm.tree中的类">JumpInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a jump instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/LabelNode.html" title="team.floracore.lib.asm.tree中的类">LabelNode</a></td>
<td class="colLast">
<div class="block">An <a href="../../../../../team/floracore/lib/asm/tree/AbstractInsnNode.html" title="team.floracore.lib.asm.tree中的类"><code>AbstractInsnNode</code></a> that encapsulates a <a href="../../../../../team/floracore/lib/asm/Label.html" title="team.floracore.lib.asm中的类"><code>Label</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/LdcInsnNode.html" title="team.floracore.lib.asm.tree中的类">LdcInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents an LDC instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/LineNumberNode.html" title="team.floracore.lib.asm.tree中的类">LineNumberNode</a></td>
<td class="colLast">
<div class="block">A node that represents a line number declaration.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/LocalVariableAnnotationNode.html" title="team.floracore.lib.asm.tree中的类">LocalVariableAnnotationNode</a></td>
<td class="colLast">
<div class="block">A node that represents a type annotation on a local or resource variable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/LocalVariableNode.html" title="team.floracore.lib.asm.tree中的类">LocalVariableNode</a></td>
<td class="colLast">
<div class="block">A node that represents a local variable declaration.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/LookupSwitchInsnNode.html" title="team.floracore.lib.asm.tree中的类">LookupSwitchInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a LOOKUPSWITCH instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/MethodInsnNode.html" title="team.floracore.lib.asm.tree中的类">MethodInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a method instruction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/MethodNode.html" title="team.floracore.lib.asm.tree中的类">MethodNode</a></td>
<td class="colLast">
<div class="block">A node that represents a method.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ModuleExportNode.html" title="team.floracore.lib.asm.tree中的类">ModuleExportNode</a></td>
<td class="colLast">
<div class="block">A node that represents an exported package with its name and the module that can access to it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ModuleNode.html" title="team.floracore.lib.asm.tree中的类">ModuleNode</a></td>
<td class="colLast">
<div class="block">A node that represents a module declaration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ModuleOpenNode.html" title="team.floracore.lib.asm.tree中的类">ModuleOpenNode</a></td>
<td class="colLast">
<div class="block">A node that represents an opened package with its name and the module that can access it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ModuleProvideNode.html" title="team.floracore.lib.asm.tree中的类">ModuleProvideNode</a></td>
<td class="colLast">
<div class="block">A node that represents a service and its implementation provided by the current module.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ModuleRequireNode.html" title="team.floracore.lib.asm.tree中的类">ModuleRequireNode</a></td>
<td class="colLast">
<div class="block">A node that represents a required module with its name and access of a module descriptor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/MultiANewArrayInsnNode.html" title="team.floracore.lib.asm.tree中的类">MultiANewArrayInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a MULTIANEWARRAY instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/ParameterNode.html" title="team.floracore.lib.asm.tree中的类">ParameterNode</a></td>
<td class="colLast">
<div class="block">A node that represents a parameter of a method.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/RecordComponentNode.html" title="team.floracore.lib.asm.tree中的类">RecordComponentNode</a></td>
<td class="colLast">
<div class="block">A node that represents a record component.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/TableSwitchInsnNode.html" title="team.floracore.lib.asm.tree中的类">TableSwitchInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a TABLESWITCH instruction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/TryCatchBlockNode.html" title="team.floracore.lib.asm.tree中的类">TryCatchBlockNode</a></td>
<td class="colLast">
<div class="block">A node that represents a try catch block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/TypeAnnotationNode.html" title="team.floracore.lib.asm.tree中的类">TypeAnnotationNode</a></td>
<td class="colLast">
<div class="block">A node that represents a type annotation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/TypeInsnNode.html" title="team.floracore.lib.asm.tree中的类">TypeInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a type instruction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/VarInsnNode.html" title="team.floracore.lib.asm.tree中的类">VarInsnNode</a></td>
<td class="colLast">
<div class="block">A node that represents a local variable instruction.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="异常错误概要表, 列表异常错误和解释">
<caption><span>异常错误概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">异常错误</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../team/floracore/lib/asm/tree/UnsupportedClassVersionException.html" title="team.floracore.lib.asm.tree中的类">UnsupportedClassVersionException</a></td>
<td class="colLast">
<div class="block">Exception thrown in <a href="../../../../../team/floracore/lib/asm/tree/AnnotationNode.html#check-int-"><code>AnnotationNode.check(int)</code></a>, <a href="../../../../../team/floracore/lib/asm/tree/ClassNode.html#check-int-"><code>ClassNode.check(int)</code></a>, <a href="../../../../../team/floracore/lib/asm/tree/FieldNode.html#check-int-"><code>FieldNode.check(int)</code></a> and <a href="../../../../../team/floracore/lib/asm/tree/MethodNode.html#check-int-"><code>MethodNode.check(int)</code></a> when these nodes (or their children, recursively)
 contain elements that were introduced in more recent versions of the ASM API than version passed
 to these methods.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="程序包team.floracore.lib.asm.tree的说明">程序包team.floracore.lib.asm.tree的说明</h2>
<div class="block"><p>
    Provides an ASM visitor that constructs a tree representation of the
    classes it visits. This class adapter can be useful to implement "complex"
    class manipulation operations, i.e., operations that would be very hard to
    implement without using a tree representation (such as optimizing the number
    of local variables used by a method).
</p>

<p>
    However, this class adapter has a cost: it makes ASM bigger and slower. Indeed
    it requires more than twenty new classes, and multiplies the time needed to
    transform a class by almost two (it is almost two times faster to read, "modify"
    and write a class with a ClassVisitor than with a ClassNode). This is why
    this package is bundled in an optional <code>asm-tree.jar</code> library that
    is separated from (but requires) the <code>asm.jar</code> library, which contains
    the core ASM framework. This is also why <em>it is recommended not to use this
    class adapter when it is possible</em>.
</p>

<p>
    The root class is the ClassNode, that can be created from existing bytecode. For example:
</p>

<pre>
  ClassReader classReader = new ClassReader(source);
  ClassNode classNode = new ClassNode();
  classReader.accept(classNode, 0);
</pre>

<p>
    Now the content of ClassNode can be modified and then
    serialized back into bytecode:
</p>

<pre>
  ClassWriter classWriter = new ClassWriter(0);
  classNode.accept(classWriter);
</pre>

<p>
    Using a simple ClassVisitor it is possible to create MethodNode instances per-method.
    In this example MethodNode is acting as a buffer that is flushed out at visitEnd() call:
</p>

<pre>
  ClassReader classReader = new ClassReader(source);
  ClassWriter classWriter = new ClassWriter(0);
  ClassVisitor classVisitor = new ClassVisitor(ASM7, classWriter) {
    public MethodVisitor visitMethod(int access, String name,
        String desc, String signature, String[] exceptions) {
      final MethodVisitor methodVisitor = 
          super.visitMethod(access, name, desc, signature, exceptions);
      MethodNode methodNode = new MethodNode(access, name, desc, signature, exceptions) {
        public void visitEnd() {
          // transform or analyze method code using tree API
          accept(methodVisitor);
        }
      };
    }
  };
  classReader.accept(classVisitor, 0);
</pre>

<p>
    Several strategies can be used to construct method code from scratch. The first
    option is to create a MethodNode, and then create XxxInsnNode instances and
    add them to the instructions list:
</p>

<pre>
MethodNode methodNode = new MethodNode(...);
methodNode.instructions.add(new VarInsnNode(ALOAD, 0));
...
</pre>

<p>
    Alternatively, you can use the fact that MethodNode is a MethodVisitor, and use
    that to create the XxxInsnNode and add them to the instructions list through
    the standard MethodVisitor methods:
</p>

<pre>
MethodNode methodNode = new MethodNode(...);
methodNode.visitVarInsn(ALOAD, 0);
...
</pre>

<p>
    If you cannot generate all the instructions in sequential order, i.e. if you
    need to save some pointer in the instruction list and then insert instructions
    at that place after other instructions have been generated, you can use InsnList
    methods insert() and insertBefore() to insert instructions at a saved pointer.
</p>

<pre>
MethodNode methodNode = new MethodNode(...);
methodNode.visitVarInsn(ALOAD, 0);
AbstractInsnNode ptr = methodNode.instructions.getLast();
methodNode.visitVarInsn(ALOAD, 1);
// inserts an instruction between ALOAD 0 and ALOAD 1
methodNode.instructions.insert(ptr, new VarInsnNode(ALOAD, 0));
...
</pre>

<p>
    If you need to insert instructions while iterating over an existing instruction
    list, you can also use several strategies. The first one is to use a
    ListIterator over the instruction list:
</p>

<pre>
ListIterator it = methodNode.instructions.iterator();
while (it.hasNext()) {
    AbstractInsnNode insnNode = (AbstractInsnNode) it.next();
    if (...) {
        it.add(new VarInsnNode(ALOAD, 0));
    }
}
</pre>

<p>
    It is also possible to convert an instruction list into an array and iterate through
    array elements:
</p>

<pre>
AbstractInsnNode[] insns = methodNode.instructions.toArray();
for(int i = 0; i&lt;insns.length; i++) {
    AbstractInsnNode insn = insns[i];
    if (...) {
        methodNode.instructions.insert(insn, new VarInsnNode(ALOAD, 0));
    }
}
</pre>

<p>
    If you want to insert these instructions through the MethodVisitor methods,
    you can use another instance of MethodNode as a MethodVisitor and then
    insert instructions collected by that instance into the instruction list.
    For example:
</p>

<pre>
AbstractInsnNode[] insns = methodNode.instructions.toArray();
for(int i = 0; i&lt;insns.length; i++) {
    AbstractInsnNode insn = insns[i];
    if (...) {
        MethodNode toInsert = new MethodNode();
        toInsert.visitVarInsn(ALOAD, 0);
        toInsert.visitVarInsn(ALOAD, 1);
        m.instructions.insert(insn, toInsert.instructions);
    }
}
</pre>

<p></div>
<dl>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>ASM 1.3.3
</p></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li class="navBarCell1Rev">程序包</li>
<li>类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../team/floracore/lib/asm/signature/package-summary.html">上一个程序包</a></li>
<li><a href="../../../../../team/floracore/lib/asm/tree/analysis/package-summary.html">下一个程序包</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?team/floracore/lib/asm/tree/package-summary.html" target="_top">框架</a></li>
<li><a href="package-summary.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
